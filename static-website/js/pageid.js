!function(s,r){var a={docCookies:{getItem:function(e){return e&&decodeURIComponent(s.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,i,n,o,r){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(i)switch(i.constructor){case Number:a=i===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+i;break;case String:a="; expires="+i;break;case Date:a="; expires="+i.toUTCString()}return s.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(o?"; domain="+o:"")+(n?"; path="+n:"")+(r?"; secure":""),!0},removeItem:function(e,t,i){return!!this.hasItem(e)&&(s.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)},keys:function(){for(var e=s.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,i=0;i<t;i++)e[i]=decodeURIComponent(e[i]);return e}},getDefaultFontSize:function(e){e=e||s.body;var t=s.createElement("div");t.style.cssText="display:inline-block; padding:0; line-height:1; position:absolute; visibility:hidden; font-size:1em",t.appendChild(s.createTextNode("M")),e.appendChild(t);var i=t.offsetHeight;return e.removeChild(t),i},getDocHeight:function(){var e=s;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)},visible:function(e){return"none"!=e.style.display&&"hidden"!=e.style.visibility&&(0!==e.offsetWidth&&0!==e.offsetHeight)},log:function(){if("localhost"===r.location.hostname||0===r.location.hostname.indexOf("staging")||r.DEBUG)return r.console&&r.console.log&&Function.apply.call(r.console.log,r.console,arguments)},getUrl:function(e){return e?r.location.href.split("?")[0]:r.location.href},nextElementSibling:function(e){if(e.nextElementSibling)return e.nextElementSibling;for(;(e=e.nextSibling)&&1!==e.nodeType;);return e},previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;for(;(e=e.previousSibling)&&1!==e.nodeType;);return e},getTcpaDisclosureElement:function(e){if(!e||""==e)return null;var t=s.querySelector(e);if(null!==t)return t;var i=s.getElementById("leadid_tcpa_disclosure");if(i){var n=i.parentNode;if(n&&"LABEL"==n.nodeName)return n;var o=a.nextElementSibling(i);if(o&&"LABEL"==o.nodeName)return o;var r=a.previousElementSibling(i);if(r&&"LABEL"==r.nodeName)return r}return null},getTcpaDisclosureText:function(e){if(!e)return"";var t="jQuery"in r&&e instanceof jQuery?e.get(0):e;return"LABEL"==t.nodeName?t.textContent||t.innerText:e.textContent||e.innerText},getForms:function(){var e=[],t=s.querySelectorAll("input[name=campid]");if(null===t||0===t.length)return e;for(var i=0;i<t.length;i++)for(var n=t[i].parentNode;null!==n&&n!==s;){var o=n;if("FORM"==o.nodeName){e.push(o);break}n=o.parentNode}return e},upsertLeadiDFormElement:function(e){var t;if(!s.getElementById("leadid_token"))if((t=a.getForms())&&0<t.length)for(var i=0;i<t.length;i++){var n=(o=t[i]).querySelector("input[name=universal_leadid]");e&&null===n&&((n=s.createElement("input")).setAttribute("type","hidden"),n.setAttribute("id","leadid_token"),n.setAttribute("name","universal_leadid"),n.setAttribute("value",""),o.appendChild(n))}else if((t=s.getElementsByTagName("form"))&&0<t.length)for(i=0;i<t.length;i++){var o;n=(o=t[i]).querySelector("input[name=universal_leadid]");e&&null===n&&((n=s.createElement("input")).setAttribute("type","hidden"),n.setAttribute("id","leadid_token"),n.setAttribute("name","universal_leadid"),n.setAttribute("value",""),o.appendChild(n))}},upsertLeadiDTcpaTags:function(e){if(!s.getElementById("leadid_tcpa_disclosure")&&e&&""!=e){var t=a.getTcpaDisclosureElement(e);if(null!==t){var i=t.innerHTML,n=s.createElement("label");n.innerHTML=i;var o=s.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("id","leadid_tcpa_disclosure"),n.insertBefore(o,n.firstChild),t.innerHTML=n.outerHTML}}},captureDisclosure:function(e){var t={};if(!e||""==e)return t;var i=a.getTcpaDisclosureElement(e);if(null===i)return t;if(t.has_tags=!0,t.html=i.innerHTML,t.text=a.getTcpaDisclosureText(i),t.visible=a.visible(i),"getComputedStyle"in r){var n=r.getComputedStyle(i);t.font_size=n["font-size"],t.font_color=n.color,t.background_color=n["background-color"]}var o=i.getBoundingClientRect();return t.offset_top=o.top+s.body.scrollTop,t.offset_left=o.left+s.body.scrollLeft,t}};r.PageIDUtils=a}(document,window),function(l,r,a){function s(e){var t,i,n,o,r;if(i=[],r=/%20/g,n=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},e instanceof Array)for(o in e)n(o,e[o]);else for(t in e)c(t,e[t],n);return i.join("&").replace(r,"+")}function c(e,t,i){var n,o,r,a;if(a=/\[\]$/,t instanceof Array)for(o=0,r=t.length;o<r;o++)a.test(e)?i(e,t[o]):c(e+"["+("object"==typeof t[o]?o:"")+"]",t[o],i);else if("object"==typeof t)for(n in t)c(e+"["+n+"]",t[n],i);else i(e,t)}function u(){if(r.XDomainRequest)return new r.XDomainRequest;if(r.XMLHttpRequest)return new r.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}}function t(e,t,i,n){var o=u();o?(o.open("POST",e,!0),r.XDomainRequest?(o.contentType="text/plain",o.onerror=function(){var e="json"===o.responseType?o.response:JSON.parse(o.responseText||"{}");n&&n.call(a,e||{})},o.onload=function(){var e="json"===o.responseType?o.response:JSON.parse(o.responseText||"{}");i&&i.call(a,e||{})},o.onprogress=function(){},o.ontimeout=function(){}):(o.setRequestHeader("Content-Type","text/plain"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onreadystatechange=function(){if(3<o.readyState){var e="json"===o.responseType?o.response:JSON.parse(o.responseText||"{}");200<=o.status&&o.status<300?i&&i.call(a,e||{}):n&&n.call(a,e||{})}}),o.withCredentials=!0,r.XDomainRequest?setTimeout(function(){o.send(s(t))},0):o.send(s(t))):PageIDUtils.log("AJAX (XMLHTTP) not supported.")}if(!r.pageid&&!r.__page__){var e=function(){var e=this;if(arguments.callee._singletonInstance)return arguments.callee._singletonInstance;arguments.callee._singletonInstance=e};e.prototype.checkLeadId=function(){var e=this;if(PageIDUtils.upsertLeadiDFormElement(e.settings.auto_insert_leadid),PageIDUtils.upsertLeadiDTcpaTags(e.settings.tcpa_selector),r.LeadiD)e.captureView();else{var t=l.createElement("script");t.src=l.location.protocol+"//create.lidstatic.com/campaign/6ee76ac5-5365-872c-99c4-7a45603b6ef8.js?snippet_version=2",t.async=!0,t.onload=function(){e.captureView()},t.onerror=function(){e.captureView()},t.id="LeadiDscript_campaign",t.type="text/javascript",l.head.appendChild(t)}},e.prototype.captureView=function(){var s=this;if(s.settings){var e={field_name:s.settings.field_name,aid:s.settings.aid,timestamp:(new Date).getTime(),url:PageIDUtils.getUrl(s.settings.ignore_query),rurl:l.referrer,cookie:l.cookie,html:l.documentElement.outerHTML,script_url:s.settings.script_url,disclosure:PageIDUtils.captureDisclosure(s.settings.tcpa_selector),leadid_script_status:r.LeadiD&&"function"==typeof r.LeadiD.hasValidToken&&r.LeadiD.hasValidToken()?"loaded":"blocked",leadid_account:r.LeadiD&&"function"==typeof r.LeadiD.getLac?r.LeadiD.getLac():null,leadid_campaign:r.LeadiD&&"function"==typeof r.LeadiD.getLck?r.LeadiD.getLck():null,leadid_token:r.LeadiD&&"undefined"!=typeof r.LeadiD.token?r.LeadiD.token:null,page:{width:r.innerWidth,height:r.innerHeight,device_width:screen.width,device_height:screen.height,device_pixel_ratio:r.devicePixelRatio,default_font_size_px:PageIDUtils.getDefaultFontSize()}};s.vid&&(e.vid=s.vid),s.settings.non_consumer_form&&(e.non_consumer_form=s.settings.non_consumer_form),t(s.settings.view_url,e,function(e){if(e&&e.view_id){s.views.push(e);var t=l.getElementsByTagName("form");if(t&&0<t.length)for(var i=0;i<t.length;i++){var n=t[i],o=n.querySelector("[name="+s.settings.field_name+"]");if(s.settings.auto_insert&&null===o&&((o=l.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name",s.settings.field_name),n.appendChild(o)),o&&o.setAttribute("value",e.view_id),!s.settings.ignore_vid){var r=n.querySelector("[name=vid]");s.settings.auto_insert&&null===r&&((r=l.createElement("input")).setAttribute("type","hidden"),r.setAttribute("name","vid"),n.appendChild(r)),r&&r.setAttribute("value",e.visitor_id)}}if(PageIDUtils.log("Visitor ID: ",e.visitor_id),PageIDUtils.log("View ID: ",e.view_id),s.disclosure_match_type=e.disclosure_match_type,!s.vid){s.vid=e.visitor_id,PageIDUtils.docCookies.setItem(s.settings.cookie_name,s.vid,Infinity,"/");for(var a=s.visitor_callbacks.length-1;0<=a;a--)s.visitor_callbacks[a].call(s,s.vid),s.visitor_callbacks.splice(a,1)}for(a=s.callbacks.length-1;0<=a;a--)s.callbacks[a].call(s,e.view_id),s.callbacks.splice(a,1)}},function(e){PageIDUtils.log("Error:",e)})}else PageIDUtils.log("WARNING: Cannot captureView without initlization with settings.")},e.prototype.getViewId=function(e){var t=this;if(0<t.views.length){var i=t.views[t.views.length-1];e.call(t,i.view_id,i.disclosure_match_type)}t.callbacks.push(e)},e.prototype.getVisitorId=function(e){var t=this;t.vid&&e.call(t,t.vid),t.visitor_callbacks.push(e)},e.prototype.getRootUrl=function(){return this.settings.root_url.slice(0)},e.prototype.initialize=function(e){var t=this;if(t.settings)PageIDUtils.log("WARNING: Already initialized, cannot re-initialize. No-op.");else{t.settings=e,t.vid=PageIDUtils.docCookies.getItem(t.settings.cookie_name),t.visitor_callbacks=[],t.callbacks=[],t.views=[];var i=setInterval(function(){"complete"===l.readyState&&(clearInterval(i),t.checkLeadId())},10)}},r.pageid=r.__page__=new e,r.pageChanged=r.__page__.captureView,r.pageLoaded=r.__page__.captureView}}(document,window);;(function(window) {
  window['pageid'] && window['pageid'].initialize({"field_name":"___pageid___","tcpa_selector":".pageid-tcpa","aid":"","cookie_name":"uid","debug":false,"ignore_query":false,"ignore_vid":true,"auto_insert":true,"auto_insert_leadid":true,"non_consumer_form":false,"view_url":"//www.sunrun.com/proxy/pageid","root_url":"//www.sunrun.com/","script_url":"http://www.sunrun.com/proxy/pageid.js"});
})(window);